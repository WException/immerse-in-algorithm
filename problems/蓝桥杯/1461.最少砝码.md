# 1461.最少砝码

蓝桥杯题库 [题目链接](https://www.lanqiao.cn/problems/1461/learning/)。

> 思维，省赛，2021

因为是真题官方题解比较详细，这里直接使用官方题解

## 题目大意
你有一架天平。现在你要设计一套砝码，使得利用这些砝码可以称出任意小于等于 $N$ 的正整数重量。
那么这套砝码最少需要包含多少个砝码？
注意砝码可以放在天平两边。

## 解题思路
一开始我们没有头绪对吧，我们先想想问题的简化版本： 砝码只能放在天平的一边，那么最少要几个砝码？

稍微想想我们就知道，要能秤称出任意 小于等于 $N$ ，跟 $N$ 转化的 $2$ 进制位数有关，假设 $N$ 的二进制有 $cnt$ 位。
要表示所有比 $N$ 小的数，那么每一位都有选和不选俩种情况，所以最少需要 $cnt$ 个。

那么我们能不能用三进制来表示放在俩边的情况呢？ 三进制下假设我们有 $0、1、2$ 三种状态，如果我们用 $0$ 表示不选， 用 $1$ 表示加上， 用 $2$ 表示减，唔这样好像不太合适。

这里就要引入平衡三进制了，什么是平衡三进制呢？
平衡三进制，也称为对称三进制。这是一个不太标准的 **计数体系**。正规的三进制的数字都是由 `0`,`1`,`2` 构成的，而平衡三进制的数字是由 `-1`,`0`,`1` 构成的。它的基数也是 `3`（因为有三个可能的值）。由于将 `-1` 写成数字不方便，我们将使用字母 `Z` 来代替 `-1`。
把 `64` 转换成平衡三进制。
首先，我们用标准三进制数来重写这个数：
$$
60_{10} = 2101_3
$$
让我们从对整个数影响最小的数字（最低位）进行处理：
- `101` 被跳过（因为在平衡三进制中允许 `0` 和 `1`）；
- `2` 变成了 `Z`，它左边的数字加 `1`，得到 `1Z101`；
- `1` 被跳过，得到 `1Z101`。
最终的结果是 `1Z101`。
我们再把它转换回十进制：
$$
  exttt{1Z101} = 81   imes 1 + 21   imes (-1) + 9   imes 1 + 3  imes0 + 1   imes 1 = 64_{10}
$$
而我们使用 $3^k(k = 1,2,3...)$ 可以表示出 $[1, \frac{3^{n+1} - 1}{2}]$ 的所有整数。
对于输入 $n$ 求出 $k$
$$
n \leq\frac{3^{k+1} - 1}{2}
$$
注：右边是等比序列前 $n$ 项和公式推出。

### C++代码

```c++
#include<bits/stdc++.h>
using namespace std;
signed main()
{
    long long x , sum = 1 , cnt = 0;
    cin >> x;
    while(sum <= x){
        sum += pow(3 , cnt);
        cnt ++ ;
    }
    cout << cnt << '\n';
    return 0;
}

```

### Java代码

```Java
import java.util.Scanner;

public class Main {
    public static void main(String[] args) {
        Scanner sc=new Scanner(System.in);
        long x=sc.nextLong();
        long sum=1,cur=1;
        while(sum<x){
            sum+=Math.pow(3, cur);
            cur++;
        }
        System.out.println(cur);
    }
}

```

### Python3代码